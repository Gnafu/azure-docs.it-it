---
title: Endpoint di streaming in Servizi multimediali di Azure | Microsoft Docs
description: Questo articolo descrive le caratteristiche degli endpoint di streaming e come vengono usati da Servizi multimediali di Azure.
services: media-services
documentationcenter: ''
author: Juliako
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: article
ms.date: 10/22/2018
ms.author: juliako
ms.openlocfilehash: 224f60d5b06f87e7b619e6c56b161ec700c657b9
ms.sourcegitcommit: c2c279cb2cbc0bc268b38fbd900f1bac2fd0e88f
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/24/2018
ms.locfileid: "49986611"
---
# <a name="streaming-endpoints"></a>Endpoint di streaming

In Servizi multimediali di Azure un'entità [endpoint di streaming](https://docs.microsoft.com/rest/api/media/streamingendpoints) rappresenta un servizio di streaming in grado di distribuire contenuti direttamente a un'applicazione di lettore client o a una rete CDN (rete per la distribuzione di contenuti) per la successiva distribuzione. Il flusso in uscita da un servizio endpoint di streaming può essere costituito da un flusso live o da una risorsa video on demand associata all'account di Servizi multimediali. Quando si crea un account di Servizi multimediali viene creato un endpoint di streaming **predefinito** nello stato Arrestato. L'endpoint di streaming predefinito non può essere eliminato. Nell'account è possibile creare altri endpoint di streaming. Per avviare lo streaming di video, è necessario avviare l'endpoint di streaming. 

## <a name="streamingendpoint-types"></a>Tipi di StreamingEndpoint  

Sono disponibili due tipi di entità **StreamingEndpoint**: **Standard** e **Premium**. Il tipo è definito in base al numero di unità di scala (`scaleUnits`) allocate per l'endpoint di streaming. 

La tabella seguente descrive i tipi:  

|type|Unità di scala|DESCRIZIONE|
|--------|--------|--------|  
|**Endpoint di streaming Standard** (scelta consigliata)|0|Il tipo **Standard** rappresenta la scelta consigliata per tutti gli scenari di streaming e per qualsiasi numero di destinatari. Il tipo **Standard** consente la scalabilità automatica della larghezza di banda in uscita. <br/>Per i clienti con requisiti più complessi, Servizi multimediali mette a disposizione endpoint di streaming di tipo **Premium**, scalabili orizzontalmente qualora il numero dei destinatari Internet sia più ampio. Se si prevedono un vasto pubblico e utenti simultanei, contattare Microsoft all'indirizzo amsstreaming@microsoft.com per valutare la necessità di passare al tipo **Premium**. |
|**Endpoint di streaming Premium**|>0|Gli endpoint di streaming **Premium** sono ideali per i carichi di lavoro avanzati, in quanto offrono una capacità di larghezza di banda dedicata e scalabile. Per passare al tipo **Premium** è necessario regolare il valore `scaleUnits`. Il valore `scaleUnits` rappresenta la capacità di uscita dedicata acquistabile in incrementi di 200 Mbps. Quando si usa il tipo **Premium**, ogni unità abilitata fornisce all'applicazione una capacità di larghezza di banda aggiuntiva. |

## <a name="working-with-cdn"></a>Uso della rete CDN

Nella maggior parte dei casi, la rete per la distribuzione di contenuti è abilitata. Se, tuttavia, si prevede che la concorrenza massima sia inferiore a 500 visualizzatori, è consigliabile disabilitare la rete CDN perché la modalità di concorrenza consente un miglior ridimensionamento della rete.

### <a name="detailed-explanation-of-how-caching-works"></a>Spiegazione dettagliata del funzionamento della memorizzazione nella cache

Quando si aggiunge una rete CDN non è presente alcun valore specifico relativo alla larghezza di banda, perché la larghezza di banda necessaria per un endpoint di streaming abilitato per la rete CDN è variabile e dipende molto dal tipo di contenuto, dalla richiesta, dal bitrate e dai protocolli. La rete CDN memorizza nella cache soltanto ciò che viene richiesto. Ciò significa che il contenuto più diffuso viene gestito direttamente dalla rete CDN, a condizione che il frammento video sia memorizzato nella cache. Il contenuto live viene in genere memorizzato nella cache perché molte persone guardano la stessa cosa. Il contenuto su richiesta può risultare più complesso perché può essere in parte molto richiesto e in parte no. Se si hanno milioni di risorse video con richieste saltuarie, ad esempio con solo 1 o 2 visualizzatori a settimana, a fronte di migliaia di persone che guardano video tutti diversi, la rete CDN perde di efficacia. In presenza di questi mancati riscontri nella cache è consigliabile aumentare il carico sull'endpoint di streaming.
 
È anche necessario valutare il funzionamento del flusso adattivo. Ogni singolo frammento video viene memorizzato nella cache come entità in sé. Ad esempio, nel caso di un video che viene guardato per la prima volta da un utente che ne osserva solo alcuni secondi qua e là, nella rete CDN vengono memorizzati solo i frammenti video associati a ciò che è stato guardato. Con il flusso adattivo, si hanno in genere da 5 a 7 bitrate del video diversi. I video guardati con bitrate diversi da utenti diversi vengono memorizzati separatamente nella cache della rete CDN. Anche se due utenti usano lo stesso bitrate, potrebbero eseguire lo streaming usando protocolli diversi. Ogni protocollo (HLS, MPEG-DASH, Smooth Streaming) viene memorizzato nella cache separatamente. In conclusione, ogni bitrate e ogni protocollo vengono memorizzati nella cache separatamente; inoltre, vengono memorizzati nella cache solo i frammenti video che sono stati richiesti.
 
## <a name="streamingendpoint-properties"></a>Proprietà di StreamingEndpoint 

Questa sezione fornisce informazioni dettagliate su alcune proprietà dell'entità StreamingEndpoint. Per esempi di come creare un nuovo endpoint di streaming e per le descrizioni di tutte le proprietà, vedere [Streaming Endpoint](https://docs.microsoft.com/rest/api/media/streamingendpoints/create) (Endpoint di streaming). 

|Proprietà|DESCRIZIONE|  
|--------------|----------|
|`accessControl`|Consente di configurare le impostazioni di sicurezza seguenti per questo endpoint di streaming: chiavi di autenticazione intestazione firma Akamai e indirizzi IP autorizzati a connettersi a questo endpoint.<br />È possibile impostare questa proprietà quando `cdnEnabled` è impostata su false.|  
|`cdnEnabled`|Indica se è attivata l'integrazione della rete CDN di Azure per questo endpoint di streaming. L'opzione è disabilitata per impostazione predefinita.<br /><br /> Se `cdnEnabled` è impostata su true, vengono disabilitate le configurazioni seguenti: `customHostNames` e `accessControl`.<br /><br />Non tutti i data center supportano l'integrazione della rete CDN di Azure. Per verificare se per il data center in questione supporta l'integrazione della rete CDN di Azure, eseguire le operazioni seguenti:<br /><br /> - Provare a impostare `cdnEnabled` su true.<br /><br /> - Verificare il risultato restituito per un `HTTP Error Code 412` (PreconditionFailed) con un messaggio simile a "La proprietà CdnEnabled dell'endpoint di streaming non può essere impostata su true perché la funzionalità CDN non è disponibile nell'area corrente."<br /><br /> Se viene restituito questo errore, il data center non supporta l'integrazione ed è necessario provare con un altro data center.|  
|`cdnProfile`|Se `cdnEnabled` è impostata su true, è anche possibile passare valori `cdnProfile`. `cdnProfile` è il nome del profilo della rete CDN in cui verrà creato il punto di endpoint della rete CDN. È possibile fornire un cdnProfile esistente o usarne uno nuovo. Se il valore è NULL e `cdnEnabled` è impostata su true, viene usato il valore predefinito "AzureMediaStreamingPlatformCdnProfile". Se il `cdnProfile` fornito è già esistente, nel profilo viene creato un endpoint. Se il profilo non esiste, ne viene creato automaticamente uno nuovo.|
|`cdnProvider`|Quando la rete CDN è abilitata, è anche possibile passare valori `cdnProvider`. `cdnProvider` consente di controllare il provider usato. Sono attualmente supportati tre valori: "StandardVerizon", "PremiumVerizon" e "StandardAkamai". Se non viene specificato alcun valore e `cdnEnabled` è impostata su true, viene usato "StandardVerizon", il valore predefinito.|
|`crossSiteAccessPolicies`|Viene usata per specificare i criteri di accesso intersito per vari client. Per altre informazioni, vedere [Cross-domain policy file specification](http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html) (Specifica dei file di criteri tra domini) e [Making a Service Available Across Domain Boundaries](http://msdn.microsoft.com/library/cc197955\(v=vs.95\).aspx)(Disponibilità di un servizio tra confini di dominio).|  
|`customHostNames`|Viene usata per configurare un endpoint di streaming in modo che accetti il traffico indirizzato a un nome host personalizzato. Semplifica la configurazione della gestione del traffico tramite uno strumento di gestione del traffico globale e l'uso di nomi di dominio personalizzati come nome dell'endpoint di streaming.<br /><br /> La proprietà del nome di dominio deve essere confermata da Servizi multimediali di Azure, che la verifica richiedendo un record `CName` contenente l'ID dell'account di Servizi multimediali come un componente da aggiungere al dominio in uso. Ad esempio, per usare "sports.contoso.com" come nome host personalizzato per l'endpoint di streaming, è necessario configurare un record per `<accountId>.contoso.com` che punti a uno dei nomi dell'host di verifica di Servizi multimediali. Il nome dell'host di verifica è composto da verifydns.\<mediaservices-dns-zone >. La tabella seguente contiene le zone DNS da usare nel record di verifica per le diverse aree di Azure.<br /><br /> America del Nord, Europa, Singapore, Hong Kong, Giappone:<br /><br /> - mediaservices.windows.net<br /><br /> - verifydns.mediaservices.windows.net<br /><br /> Cina:<br /><br /> - mediaservices.chinacloudapi.cn<br /><br /> - verifydns.mediaservices.chinacloudapi.cn<br /><br /> Ad esempio, un record `CName` che esegue il mapping di "945a4c4e-28ea-45cd-8ccb-a519f6b700ad.contoso.com" a "verifydns.mediaservices.windows.net" dimostra che l'ID di Servizi multimediali 945a4c4e-28ea-45cd-8ccb-a519f6b700ad è proprietario del dominio contoso.com, consentendo di usare qualsiasi nome in contoso.com come nome host personalizzato per un endpoint di streaming di tale account.<br /><br /> Per individuare il valore dell'ID di Servizi multimediali, passare al [portale di Azure](https://portal.azure.com/) e selezionare l'account di Servizi multimediali. L'ID di Servizi multimediali viene visualizzato a destra della pagina DASHBOARD.<br /><br /> **Avviso**: se si tenta di impostare un nome host personalizzato senza l'adeguata verifica del record `CName`, la risposta DNS avrà esito negativo e verrà memorizzata nella cache per un certo tempo. Una volta definito il record corretto, potrebbe essere necessario del tempo prima che la risposta memorizzata nella cache venga nuovamente convalidata. A seconda del provider DNS del dominio personalizzato, la nuova convalida potrebbe richiedere da alcuni minuti a un'ora.<br /><br /> Oltre al `CName` che esegue il mapping di `<accountId>.<parent domain>` a `verifydns.<mediaservices-dns-zone>`, è necessario creare un altro `CName` che esegue il mapping del nome host personalizzato (ad esempio `sports.contoso.com`) al nome host StreamingEndpoint di Servizi multimediali (ad esempio `amstest.streaming.mediaservices.windows.net`).<br /><br /> **Nota**: gli endpoint di streaming che si trovano nello stesso data center non possono condividere lo stesso nome host personalizzato.<br /> Questa proprietà è valida per gli endpoint di streaming di tipo Standard e Premium e può essere impostata quando "cdnEnabled" è false.<br/><br/> Attualmente AMS non supporta SSL con domini personalizzati.  |  
|`maxCacheAge`|Esegue l'override della validità massima predefinita dell'intestazione della cache di controllo HTTP impostata dall'endpoint di streaming per i frammenti multimediali e i manifesti su richiesta. Il valore è impostato in secondi.|
|`resourceState`|I valori della proprietà includono:<br /><br /> - Arrestato. Lo stato iniziale di un endpoint di streaming dopo la creazione.<br /><br /> - Avvio in corso. L'endpoint di streaming esegue la transizione allo stato di esecuzione.<br /><br /> - In esecuzione. L'endpoint di streaming è in grado di trasmettere il contenuto ai client.<br /><br /> - Ridimensionamento. Le unità di scala vengono aumentate o diminuite.<br /><br /> - Arresto in corso. L'endpoint di streaming esegue la transizione allo stato di arresto.<br/><br/> - Eliminazione in corso. L'endpoint di streaming viene eliminato.|
|`scaleUnits `|Il valore di scaleUnits rappresenta la capacità di uscita dedicata acquistabile in incrementi di 200 Mbps. Se è necessario passare al tipo **Premium**, regolare `scaleUnits`. |

## <a name="next-steps"></a>Passaggi successivi

L'esempio [in questo repository](https://github.com/Azure-Samples/media-services-v3-dotnet-quickstarts/blob/master/AMSV3Quickstarts/EncodeAndStreamFiles/Program.cs) illustra come avviare l'endpoint di streaming predefinito con .NET.

